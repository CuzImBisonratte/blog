"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[689],{7341:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>h,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var o=t(3946),s=t(4848),r=t(8453),i=t(5537),a=t(9329);const l={slug:"ap55c-openwrt",title:"Flashing a Sophos AP 55 (C) / 100 (C) with OpenWRT",authors:["konstantin"]},h=void 0,c={authorsImageUrls:[void 0]},d=[{value:"The Tech &amp; Concept",id:"the-tech--concept",level:2},{value:"Sophos AP 55 vs AP 55C",id:"sophos-ap-55-vs-ap-55c",level:3},{value:"Concept",id:"concept",level:3},{value:"Needed Hardware",id:"needed-hardware",level:3},{value:"Tutorial",id:"tutorial",level:2},{value:"Step 1: Install a TFTP server",id:"step-1-install-a-tftp-server",level:3},{value:"Step 2: Download the OpenWRT firmware",id:"step-2-download-the-openwrt-firmware",level:3},{value:"Step 3: Connect the AP to your TFTP-server",id:"step-3-connect-the-ap-to-your-tftp-server",level:3},{value:"Step 4: Connect to the Serial Console of the AP",id:"step-4-connect-to-the-serial-console-of-the-ap",level:3},{value:"Step 5: Interrupt the boot process",id:"step-5-interrupt-the-boot-process",level:3},{value:"Step 6: Booting OpenWRT",id:"step-6-booting-openwrt",level:3},{value:"Step 7: Installing OpenWRT",id:"step-7-installing-openwrt",level:3},{value:"Step 8: Finalising the installation",id:"step-8-finalising-the-installation",level:3},{value:"Conclusion",id:"conclusion",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"The school I go to had to replace all the old APs in the school. The head of IT asked two of my friends and me if we wanted to try and find some use cases for the old APs, because he didn't want to throw them away."}),"\n",(0,s.jsx)(n.p,{children:"We thought about it, and then we came up with the idea to flash OpenWRT on them. It worked! So, here is how we did it!"}),"\n","\n",(0,s.jsxs)(n.admonition,{title:"Jump to the guide",type:"note",children:[(0,s.jsx)(n.p,{children:"This blog post also contains a short summary of the steps we took to flash OpenWRT on the AP 55C."}),(0,s.jsxs)(n.p,{children:["If you just want to use this as a guide, you can skip the first part and jump to the ",(0,s.jsx)(n.a,{href:"#tutorial",children:"Tutorial section"}),"."]})]}),"\n",(0,s.jsx)(n.h2,{id:"the-tech--concept",children:"The Tech & Concept"}),"\n",(0,s.jsx)(n.p,{children:"The Sophos AP 55C is a wireless access point that runs on a custom firmware which is already based on OpenWRT. The goal was to replace the Sophos firmware with a more open and customizable version \u2014 the default version \u2014 of OpenWRT."}),"\n",(0,s.jsx)(n.h3,{id:"sophos-ap-55-vs-ap-55c",children:"Sophos AP 55 vs AP 55C"}),"\n",(0,s.jsx)(n.p,{children:"The Sophos AP 55C is the ceiling mountable version of the Sophos AP 55. The main difference is that the AP 55 has a square design with visible antennas, while the AP 55C has a round design and is meant to be mounted on ceilings. Both devices have similar hardware specifications, but the AP 55C is designed for a more discreet installation."}),"\n",(0,s.jsx)(n.p,{children:"The important thing to note here is that, while both devices have a serial console port, the AP 55 has an RJ45 port for the console, while the AP 55C uses UART-Pins inside the device. This means that you need to open the AP 55C to access the console, while the AP 55 can be accessed via a standard RJ45 to Serial cable."}),"\n",(0,s.jsx)(n.p,{children:"This means you also need different hardware to flash the devices. The AP 55 can be flashed with a standard USB to Serial adapter, while the AP 55C requires a UART adapter. (Or if you want to have another fun project, you can use a Raspberry Pi Pico as a USB-UART-bridge.)"}),"\n",(0,s.jsx)(n.h3,{id:"concept",children:"Concept"}),"\n",(0,s.jsx)(n.p,{children:"The concept is quite simple. You need to connect to the serial console of the AP, interrupt the boot process, and then use TFTP to upload the OpenWRT firmware to the device. After that, you can configure OpenWRT as you like."}),"\n",(0,s.jsx)(n.h3,{id:"needed-hardware",children:"Needed Hardware"}),"\n",(0,s.jsxs)(i.A,{groupId:"device",children:[(0,s.jsx)(a.A,{value:"55",label:"AP 55",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The Sophos AP 55 itself"}),"\n",(0,s.jsxs)(n.li,{children:["A USB to Serial RJ45 adapter (I recommend ",(0,s.jsx)(n.a,{href:"https://amzn.to/4meEwwE",children:"this one"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"A computer"}),"\n",(0,s.jsxs)(n.li,{children:["A PoE switch or injector (we used a ",(0,s.jsx)(n.a,{href:"https://amzn.to/42chkHW",children:"TP-Link TL-PoE160S"}),")"]}),"\n"]})}),(0,s.jsx)(a.A,{value:"55c",label:"AP 55C",default:!0,children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The Sophos AP 55C itself"}),"\n",(0,s.jsxs)(n.li,{children:["Two USB to Serial UART adapters (we used ",(0,s.jsx)(n.a,{href:"https://amzn.to/4m8o6ps",children:"this one"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"A computer"}),"\n",(0,s.jsx)(n.li,{children:"A small screwdriver (to open the AP 55C)"}),"\n",(0,s.jsxs)(n.li,{children:["A PoE switch or injector (we used a ",(0,s.jsx)(n.a,{href:"https://amzn.to/42chkHW",children:"TP-Link TL-PoE160S"}),")"]}),"\n"]})})]}),"\n",(0,s.jsx)(n.h2,{id:"tutorial",children:"Tutorial"}),"\n",(0,s.jsx)(n.p,{children:"This section will guide you through the steps to flash OpenWRT on the Sophos AP 55 (C)."}),"\n",(0,s.jsxs)(n.p,{children:["As with most Operating System installations, you will start off with a ",(0,s.jsx)(n.em,{children:"Live image"})," of OpenWRT, from which you will install the full version of OpenWRT. To provide the Live image to the AP, we will use TFTP."]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-install-a-tftp-server",children:"Step 1: Install a TFTP server"}),"\n",(0,s.jsx)(n.p,{children:"First, you need to install a TFTP server on your computer."}),"\n",(0,s.jsxs)(i.A,{groupId:"os",children:[(0,s.jsx)(a.A,{value:"windows",label:"Windows",children:(0,s.jsxs)(n.p,{children:["I have seen ",(0,s.jsx)(n.a,{href:"https://pjo2.github.io/tftpd64/",children:"TFTPD64"}),' used for this. Download and install it. After that, open the program and set the "Current Directory" to the folder where you will store the OpenWRT initramfs-kernel.']})}),(0,s.jsxs)(a.A,{value:"linux",label:"Linux (Debian-based)",default:!0,children:[(0,s.jsxs)(n.p,{children:["On Linux, i recommend you use ",(0,s.jsx)(n.code,{children:"tftpd-hpa"}),". Install it with your package manager. For example, on Debian/Ubuntu, you can use:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install tftpd-hpa\nsudo mkdir /srv/tftp\n"})}),(0,s.jsxs)(n.p,{children:["The directory ",(0,s.jsx)(n.code,{children:"/srv/tftp"})," will be used as the TFTP root directory in which you will place the OpenWRT initramfs-kernel."]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-download-the-openwrt-firmware",children:"Step 2: Download the OpenWRT firmware"}),"\n",(0,s.jsxs)(i.A,{groupId:"device",children:[(0,s.jsxs)(a.A,{value:"55",label:"AP 55",children:[(0,s.jsxs)(n.p,{children:["Next, you need to download the OpenWRT firmware for the Sophos AP 55. You can find the firmware on the ",(0,s.jsx)(n.a,{href:"https://downloads.openwrt.org/",children:"OpenWRT Downloads page"}),"."]}),(0,s.jsx)(n.p,{children:"Please check if the current Stable Release provides a firmware for the Sophos AP 55. If not, you can also use an older Release (at the time of writing this \u2014 24.10.2 is the latest one I found that supports the AP 55)."}),(0,s.jsx)(n.p,{children:"You will find the firmware under:"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"ath79 -> generic -> sophos_ap55-initramfs-kernel.bin"})}),(0,s.jsx)(n.p,{children:"and"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"ath79 -> generic -> sophos_ap100-initramfs-kernel.bin"})}),(0,s.jsx)(n.p,{children:"Download both files and place them in the TFTP root directory you set up in Step 1."}),(0,s.jsxs)(n.p,{children:["Then, rename them to ",(0,s.jsx)(n.code,{children:"uImage_AP55C"})," and ",(0,s.jsx)(n.code,{children:"uImage_AP100C"}),", respectively. (Without any file extension)"]}),(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The AP 55 / AP 100 use nearly the same hardware. Therefore, the AP 55 sometimes requires the AP 100 firmware to work properly. Just download both firmwares to be sure, and the AP will choose the correct one."})})]}),(0,s.jsxs)(a.A,{value:"55c",label:"AP 55C",default:!0,children:[(0,s.jsxs)(n.p,{children:["Next, you need to download the OpenWRT firmware for the Sophos AP 55C. You can find the firmware on the ",(0,s.jsx)(n.a,{href:"https://downloads.openwrt.org/",children:"OpenWRT downloads page"}),"."]}),(0,s.jsx)(n.p,{children:"Please check if the current Stable Release provides a firmware for the Sophos AP 55C. If not, you can also use an older Release (At the time of writing this \u2014 24.10.2 is the latest one i found that supports the AP 55C)."}),(0,s.jsx)(n.p,{children:"You will find the firmware under:"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"ath79 -> generic -> sophos_ap55c-initramfs-kernel.bin"})}),(0,s.jsx)(n.p,{children:"and"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"ath79 -> generic -> sophos_ap100c-initramfs-kernel.bin"})}),(0,s.jsx)(n.p,{children:"Download both files and place them in the TFTP root directory you set up in Step 1."}),(0,s.jsxs)(n.p,{children:["Then, rename them to ",(0,s.jsx)(n.code,{children:"uImage_AP55C"})," and ",(0,s.jsx)(n.code,{children:"uImage_AP100C"}),", respectively. (Without any file extension)"]}),(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The AP 55C / AP 100C use nearly the same hardware. Therefore, the AP 55C sometimes requires the AP 100C firmware to work properly. Just download both firmwares to be, sure and the AP will choose the correct one."})})]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-connect-the-ap-to-your-tftp-server",children:"Step 3: Connect the AP to your TFTP-server"}),"\n",(0,s.jsx)(n.p,{children:"Connect the main RJ45-Port of the AP (PoE-Port) to your computer with an Ethernet cable, directly to the computer on which you set up the TFTP server."}),"\n",(0,s.jsxs)(n.p,{children:["Set your computer to the static IPv4-Address of ",(0,s.jsx)(n.code,{children:"192.168.99.8"}),". The AP will use this to connect to the TFTP server. In the following, you can find instructions for Windows and Ubuntu (with Gnome). For other Operating Systems, please check the documentation of your OS."]}),"\n",(0,s.jsxs)(i.A,{groupId:"os",children:[(0,s.jsx)(a.A,{value:"windows",label:"Windows",children:(0,s.jsx)(n.p,{children:'You can set a static IP address in the Network and Sharing Center. Go to "Change adapter settings", right-click on your Ethernet adapter and select "Properties". Then select "Internet Protocol Version 4 (TCP/IPv4)" and click on "Properties". Here you can set the static IP address.'})}),(0,s.jsxs)(a.A,{value:"linux",label:"Ubuntu (Gnome)",default:!0,children:[(0,s.jsxs)(n.p,{children:["Under Ubuntu, I find it easiest to set a static IP address via the GUI. Open the Settings and go to the ",(0,s.jsx)(n.em,{children:"Network section"}),". Here you can select your Ethernet adapter and set a static IP address."]}),(0,s.jsx)(n.p,{children:"This will look something like this:"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Setting up Static IPv4 Address on Ubuntu 24",src:t(337).A+"",width:"876",height:"617"})})]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-4-connect-to-the-serial-console-of-the-ap",children:"Step 4: Connect to the Serial Console of the AP"}),"\n",(0,s.jsxs)(i.A,{groupId:"device",children:[(0,s.jsx)(a.A,{value:"55",label:"AP 55",children:(0,s.jsx)(n.p,{children:"Connect the USB to Serial RJ45 adapter to your computer and the AP."})}),(0,s.jsxs)(a.A,{value:"55c",label:"AP 55C",default:!0,children:[(0,s.jsx)(n.p,{children:"First, open the AP 55C with a small screwdriver. You will find the UART pins on the mainboard. The pinout (with the RJ45-Port at the bottom) is as follows from left to right:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Pin 1: VCC (3.3V) \u2014 Do NOT connect this pin!\nPin 2: GND\nPin 3: RX\nPin 4: TX\n"})}),(0,s.jsx)(n.p,{children:"Connect the adapter's USB to your computer. Then connect the GND, RX and TX pins of the AP to the corresponding pins of the USB to Serial adapters."})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Now, you need to connect to the serial console of the AP. You can use any terminal program for this. I recommend ",(0,s.jsx)(n.a,{href:"https://www.putty.org/",children:"PuTTY"})," for Windows and ",(0,s.jsx)(n.code,{children:"minicom"})," for Linux:"]}),"\n",(0,s.jsxs)(i.A,{groupId:"os",children:[(0,s.jsxs)(a.A,{value:"windows",label:"Windows",children:[(0,s.jsx)(n.p,{children:"Open PuTTY and set the following settings:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Connection type: Serial"}),"\n",(0,s.jsx)(n.li,{children:"Serial line: COMX (replace X with the number of your COM port)"}),"\n",(0,s.jsx)(n.li,{children:"Speed: 115200"}),"\n"]}),(0,s.jsx)(n.p,{children:'Then click on "Open" to connect to the serial console.'})]}),(0,s.jsxs)(a.A,{value:"linux",label:"Linux (debian-based)",default:!0,children:[(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.code,{children:"minicom"})," and ",(0,s.jsx)(n.code,{children:"screen"})," to connect to the serial console. First, install them if you haven't already:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install minicom screen\n"})}),(0,s.jsx)(n.p,{children:"Now, you can connect to the serial console:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo screen /dev/ttyUSB0 115200\n"})})]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-5-interrupt-the-boot-process",children:"Step 5: Interrupt the boot process"}),"\n",(0,s.jsx)(n.p,{children:"Now, power on the AP. If it is already powered, you can just unplug and replug the power cable to your PoE switch or injector."}),"\n",(0,s.jsx)(n.p,{children:"As soon as you see output on the serial console press Enter to interrupt the boot process. You should see a prompt like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ath>\n"})}),"\n",(0,s.jsx)(n.p,{children:"If the output of the bootloader is garbage, follow these steps:"}),"\n",(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:"Fixing Garbage Output on the Serial Console"}),(0,s.jsxs)(n.p,{children:["The Garbage Output is most likely caused by the AP being modified to use 7 data bits instead of the default 8 data bits for TX (",(0,s.jsx)(n.strong,{children:"not for RX"}),")!"]}),(0,s.jsx)(n.p,{children:"To fix this, you need to reconnect the RX route to the second USB to Serial adapter. The ground needs to be shared between both adapters and the AP.\nThen connect the second adapter to your computer and open a second terminal program (PuTTY or minicom)."}),(0,s.jsx)(n.p,{children:'On Putty you can set the data bits in the "Serial" section of the settings. Set it to 7 data bits and connect to the second adapter.'}),(0,s.jsx)(n.p,{children:"On minicom we used the following command to start minicom with 7 data bits:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo picocom -b 115200 -d 7 -p n -f n /dev/ttyUSB1\n"})}),(0,s.jsx)(n.p,{children:"On the terminal with which you send commands to the AP, you can now type commands. The other terminal will show the output of the AP."}),(0,s.jsxs)(n.p,{children:["The moment the output gets garbage again, switch back to 8 bits by replacing the ",(0,s.jsx)(n.code,{children:"-d 7"})," with ",(0,s.jsx)(n.code,{children:"-d 8"})," in the picocom command or changing it in PuTTY."]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-6-booting-openwrt",children:"Step 6: Booting OpenWRT"}),"\n",(0,s.jsx)(n.p,{children:"Now, you can boot OpenWRT from the TFTP server. To do this, type the following command in the serial console:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"tftpboot\nsetenv fwaddr 0x9f070000\nerase $fwaddr +$filesize\ncp.b $fileaddr $fwaddr $filesize\niminfo $fwaddr\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will prepare the AP with the image from the TFTP server. If everything works, you should see ",(0,s.jsx)(n.code,{children:"Verifying Checksum ... OK"})," in the output, then you can boot OpenWRT by running the ",(0,s.jsx)(n.code,{children:"boot"})," command."]}),"\n",(0,s.jsx)(n.h3,{id:"step-7-installing-openwrt",children:"Step 7: Installing OpenWRT"}),"\n",(0,s.jsx)(n.p,{children:"After OpenWRT has booted, you should connect the AP to the Internet by plugging the Ethernet cable from the TFTP-Server into your normal network."}),"\n",(0,s.jsx)(n.p,{children:"The console connection is still active, as it is provided via UART (AP 55C) or a dedicated Console Port (AP 55)."}),"\n",(0,s.jsxs)(n.p,{children:["Change up the network config of the AP to use DHCP, using the text editor ",(0,s.jsx)(n.code,{children:"nano"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nano /etc/config/network\n"})}),"\n",(0,s.jsx)(n.p,{children:"In there, replace the following lines:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"config interface 'lan'\n    option device 'br-lan'\n    // remove-start\n    option proto 'static'\n    option ipaddr '192.168.1.1'\n    option netmask '255.255.255.0'\n    // remove-end\n    // add-start\n    option proto 'dhcp'\n    // add-end\n    option ip6assign '60'\n"})}),"\n",(0,s.jsx)(n.p,{children:"Aand connect to the Internet using DHCP by running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"service network restart\nping -c 1 openwrt.com\n"})}),"\n",(0,s.jsx)(n.p,{children:"If the response of the ping is successful (0% packet loss), you can now install the full version of OpenWRT by running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sysupgrade https://downloads.openwrt.org/releases/24.10.2/targets/ath79/generic/openwrt-24.10.2-ath79-generic-sophos_ap100c-squashfs-sysupgrade.bin\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:"Make sure to replace the URL with the latest version of the OpenWRT firmware \u2014 same version as the initramfs-kernel you used to boot OpenWRT."}),(0,s.jsxs)(n.p,{children:["As with the initramfs-kernel, it could be possible that you need to use the AP 100C firmware instead of the AP 55C firmware. You can see this when the installation fails with an error like ",(0,s.jsx)(n.em,{children:"upgrade: Device sophos,ap55c not supported by this image"}),"."]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-8-finalising-the-installation",children:"Step 8: Finalising the installation"}),"\n",(0,s.jsx)(n.p,{children:"After the installation is complete, the AP will reboot."}),"\n",(0,s.jsx)(n.p,{children:"You will need to enable DHCP again on the AP, as the installation will reset the network config."}),"\n",(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:"Enabling DHCP again"}),(0,s.jsxs)(n.p,{children:["Change up the network config of the AP to use DHCP, using the text editor ",(0,s.jsx)(n.code,{children:"nano"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nano /etc/config/network\n"})}),(0,s.jsx)(n.p,{children:"In there replace the following lines:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"config interface 'lan'\n    option device 'br-lan'\n    // remove-start\n    option proto 'static'\n    option ipaddr '192.168.1.1'\n    option netmask '255.255.255.0'\n    // remove-end\n    // add-start\n    option proto 'dhcp'\n    // add-end\n    option ip6assign '60'\n"})}),(0,s.jsx)(n.p,{children:"and connect to the Internet using DHCP, by running:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"service network restart\nping -c 1 openwrt.com\n"})}),(0,s.jsx)(n.p,{children:"If the response of the ping is successful (0% packet loss), you can now continue further."})]}),"\n",(0,s.jsx)(n.p,{children:"Now, get the IP address of the AP by running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ip a\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then, set a password for the ",(0,s.jsx)(n.code,{children:"root"})," user by running:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"passwd\n"})}),"\n",(0,s.jsx)(n.p,{children:"This will also be the password for the OpenWRT web interface."}),"\n",(0,s.jsxs)(n.p,{children:["After this you can access the web interface of OpenWRT by opening a web browser and navigating to ",(0,s.jsx)(n.code,{children:"http://<IP_ADDRESS_OF_YOUR_AP>/"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Log in with the username ",(0,s.jsx)(n.code,{children:"root"})," and the password you set earlier."]}),"\n",(0,s.jsx)(n.p,{children:"You're done! You have successfully installed OpenWRT on your Sophos AP 55 (C) / 100 (C)."}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"Installing OpenWRT on the AP is not really hard and takes about 15-30 minutes, depending on your experience with this kind of stuff."}),"\n",(0,s.jsx)(n.p,{children:"As the APs are approaching their end-of-life support from Sophos, masses of them can be found on FB Marketplace or eBay. You can get them for around 20-30\u20ac which is a really good price for a PoE-capable access point with really decent performance."}),"\n",(0,s.jsx)(n.p,{children:"I hope you enjoyed this blog post, and maybe you will also start running free software on your own devices."}),"\n",(0,s.jsxs)(n.p,{children:["Thanks to my teammates in school for working together on this project, and thanks to the head of IT at ",(0,s.jsx)(n.a,{href:"https://lls-bad.de",children:"my school"})," for providing us with the hardware. Also thanks to ",(0,s.jsx)(n.a,{href:"https://forum.openwrt.org/t/howto-installing-openwrt-on-sophos-ap-55-and-ap-100",children:"this tutorial"})," for providing a good starting point and base for this project to build on."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"And finally, thank you for reading this!"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},9329:(e,n,t)=>{t.d(n,{A:()=>i});t(6540);var o=t(4164);const s={tabItem:"tabItem_Ymn6"};var r=t(4848);function i({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,o.A)(s.tabItem,t),hidden:n,children:e})}},5537:(e,n,t)=>{t.d(n,{A:()=>y});var o=t(6540),s=t(4164),r=t(5627),i=t(6347),a=t(372),l=t(604),h=t(1861),c=t(8749);function d(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return d(e).map((({props:{value:e,label:n,attributes:t,default:o}})=>({value:e,label:n,attributes:t,default:o})))}(t);return function(e){const n=(0,h.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function u({value:e,tabValues:n}){return n.some((n=>n.value===e))}function f({queryString:e=!1,groupId:n}){const t=(0,i.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(s),(0,o.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})}),[s,t])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,r=p(e),[i,l]=(0,o.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!u({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r}))),[h,d]=f({queryString:t,groupId:s}),[m,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,c.Dv)(n);return[t,(0,o.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:s}),w=(()=>{const e=h??m;return u({value:e,tabValues:r})?e:null})();(0,a.A)((()=>{w&&l(w)}),[w]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!u({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),x(e)}),[d,x,r]),tabValues:r}}var x=t(9136);const w={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(4848);function j({className:e,block:n,selectedValue:t,selectValue:o,tabValues:i}){const a=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),h=e=>{const n=e.currentTarget,s=a.indexOf(n),r=i[s].value;r!==t&&(l(n),o(r))},c=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const t=a.indexOf(e.currentTarget)+1;n=a[t]??a[0];break}case"ArrowLeft":{const t=a.indexOf(e.currentTarget)-1;n=a[t]??a[a.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:o})=>(0,g.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{a.push(e)},onKeyDown:c,onClick:h,...o,className:(0,s.A)("tabs__item",w.tabItem,o?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function b({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===t));return e?(0,o.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function v(e){const n=m(e);return(0,g.jsxs)("div",{className:(0,s.A)("tabs-container",w.tabList),children:[(0,g.jsx)(j,{...n,...e}),(0,g.jsx)(b,{...n,...e})]})}function y(e){const n=(0,x.A)();return(0,g.jsx)(v,{...e,children:d(e.children)},String(n))}},337:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/ipv4-ubuntu-599a4d432ad9ddf87187a1920294aaaa.png"},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(6540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}},3946:e=>{e.exports=JSON.parse('{"permalink":"/ap55c-openwrt","source":"@site/blog/2025-09-07-sophos-openwrt/index.mdx","title":"Flashing a Sophos AP 55 (C) / 100 (C) with OpenWRT","description":"The school I go to had to replace all the old APs in the school. The head of IT asked two of my friends and me if we wanted to try and find some use cases for the old APs, because he didn\'t want to throw them away.","date":"2025-09-07T00:00:00.000Z","tags":[],"readingTime":11.66,"hasTruncateMarker":true,"authors":[{"name":"Konstantin Protzen","title":"Hobby-Fullstack-Dev","url":"https://github.com/cuzimbisonratte","imageURL":"/img/konstantin.webp","key":"konstantin","page":null}],"frontMatter":{"slug":"ap55c-openwrt","title":"Flashing a Sophos AP 55 (C) / 100 (C) with OpenWRT","authors":["konstantin"]},"unlisted":false,"nextItem":{"title":"Automating IR Remote Control with Raspberry Pi Pico","permalink":"/radiopi"}}')}}]);